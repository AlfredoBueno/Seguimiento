@model SeguimientoAlumnosEgresados2.Models.exalumno

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@*Hoja de estilo*@
<link href="~/Content/StyleSheetForm.css" rel="stylesheet" />
@*Referencias*@
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
@*datepicker*@
<script type="text/javascript">
    $(document).ready(function () {
        $(".datepicker").datepicker({
            dateFormat: "mm/dd/yy",
            changeMonth: true,
            changeYear: true,
            gotoCurrent: true,
            yearRange: "1970:+10",
            showOn: "button",
            buttonText: "..."
        });

    });
</script>
@*Imgpreview*@
<script>
    $(function () {
        $("#files").change(function () {
            readURL(this);
        });
    });


    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                //alert(e.target.result);
                $('#imgLogo').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }
</script>
@*Upload*@
<script type="text/javascript">
var form = document.getElementById('formTest').onsubmit = function (e) {
        e.preventDefault();
    var formdata = new FormData(); //FormData object
    var fileInput = document.getElementById('files');
    if (fileInput != "" && fileInput.files.length > 0) {
        //Iterating through each files selected in fileInput
        for (i = 0; i < fileInput.files.length; i++) {
            //Appending each file to FormData object
            formdata.append(fileInput.files[i].name, fileInput.files[i]);
        }
        //Creating an XMLHttpRequest and sending
        var xhr = new XMLHttpRequest();

           var url = '@Url.Action("Create", "exalumnoesController")';
        xhr.open('POST', url);
        xhr.send(formdata);
        xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
        var result = xhr.responseText;

        }
        }
        return false;
    }
    }        
</script>


        <h2>Registrar exalumno</h2>

        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()

            <div class="divRegistro">
                <h4>Nuevo exalumno:</h4>
                <hr />
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                <div class="form-group">
                    <label class="col-md-2">Numero de control:</label>                    
                    <a class="req">*</a>
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.noControl, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.noControl, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2">Primer nombre:</label>
                    <a class="req">*</a>
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.nombre, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.nombre, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2">Segundo nombre:</label>
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.segundoNombre, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.segundoNombre, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2">Apellido:</label>
                    <a class="req">*</a>
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.apellido, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.apellido, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2">Segundo apellido:</label>
                    <a class="req">*</a>
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.segundoApellido, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.segundoApellido, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2">Correo:</label>
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.correo, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.correo, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2">Clave:</label>
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.clave, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.clave, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2">Carrera</label>
                    <div class="col-md-10">
                        @Html.DropDownList("idCarrera", null, htmlAttributes: new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.idCarrera, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2">Telefono</label>
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.telefono, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.telefono, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2">Fecha de nacimiento:</label>
                    <a class="req">*</a>
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.fechaNacimiento, new { htmlAttributes = new { @class = "form-control datepicker" } })
                        @Html.ValidationMessageFor(model => model.fechaNacimiento, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2">Fecha de egreso:</label>
                    <a class="req">*</a>
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.fechaEgreso, new { htmlAttributes = new { @class = "form-control datepicker" } })
                        @Html.ValidationMessageFor(model => model.fechaEgreso, "", new { @class = "text-danger" })
                    </div>
                </div>

                @*<div>
                    <div class="col-lg-offset-1">
                        @using (Html.BeginForm("Create", "exalumnoesController", FormMethod.Post, new { enctype = "multipart/form-data" }))
                        {
                            <img id="imgLogo" src="~/Img/perfprev.png" style="height: 140px; width: 150px;" alt="Logo Image" />
                            <input type="file" name="UImage" id="Ufilesz" size="10" />

                        }
                    </div>
                </div>*@
            @*<div>
                <form id="formTest" method="post" enctype="multipart/form-data">

                    <label for="file">Filename:</label>
                    <input type="file" name="files" id="files" />
                    <img id="imgLogo" src="~/Img/perfprev.png" style="height: 140px; width: 150px;" alt="Logo Image" />

                    <input type="submit" name="submit" value="Upload" />
                </form>
            </div>*@



                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input type="submit" value="Crear" class="btn btn-default" />
                    </div>
                </div>
            </div>
        }

        <div>
            @Html.ActionLink("Back to List", "Index")
        </div>

        @section Scripts {
            @Scripts.Render("~/bundles/jqueryval")
        }
